<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Muki 2026 接收宇宙信号 ✨</title>
    <style>
        /* --- 基础设置 --- */
        body {
            margin: 0; padding: 0;
            background-color: #fcfcf0; /* 米色背景 */
            font-family: -apple-system, sans-serif;
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            -webkit-user-select: none;
            overflow-x: hidden; /* 防止左右晃动 */
        }

        /* --- 1. Landing Page (封面层) --- */
        /* 这是一个覆盖在最上面的全屏层 */
        #landing-layer {
            position: fixed; /* 固定定位，盖住一切 */
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #fcfcf0; /* 和背景色一样，遮挡下面的内容 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999; /* 层级最高 */
            cursor: pointer;
            transition: opacity 0.5s ease; /* 淡出动画 */
        }

        #start-btn-img {
            width: 60%; max-width: 280px; height: auto;
            animation: breathe 3s ease-in-out infinite; /* 呼吸效果 */
            filter: drop-shadow(0px 10px 20px rgba(0,0,0,0.15));
        }

        .hint-text {
            margin-top: 25px; color: #aaa; font-size: 12px; letter-spacing: 3px;
            animation: blink 1.5s infinite;
        }

        /* --- 2. 抽签结果页 (和之前的 index.html 布局一样) --- */
        #main-content {
            display: none; /* 一开始隐藏，等点开始才显示 */
            width: 100%;
            flex-direction: column;
            align-items: center;
            padding-top: 4vh; padding-bottom: 50px;
            opacity: 0; transition: opacity 0.5s; /* 淡入效果 */
        }

        .fortune-wrapper {
            width: 85%; max-width: 400px;
            line-height: 0;
            filter: drop-shadow(0px 15px 30px rgba(0,0,0,0.2)); /* 阴影加深一点，更有质感 */
        }

        #fortune-img {
            width: 100%; height: auto; aspect-ratio: 9 / 16;
            object-fit: cover; border-radius: 12px; display: block;
        }

        /* IG 按钮区域 */
        .follow-link {
            margin-top: 35px; text-decoration: none; display: block;
            transition: transform 0.2s;
            filter: drop-shadow(0px 8px 15px rgba(0,0,0,0.1));
            -webkit-tap-highlight-color: transparent;
        }
        .follow-link:active { transform: scale(0.95); }
        
        #follow-png { width: 300px; height: auto; display: block; }

        .footer { margin-top: 30px; font-size: 10px; color: #ccc; }

        /* --- 动画定义 --- */
        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>

    <div id="landing-layer" onclick="startLottery()">
        <img id="start-btn-img" src="start_btn.png" alt="Touch to Start">
        <div class="hint-text">TOUCH TO START</div>
    </div>

    <div id="main-content">
        <div class="fortune-wrapper">
            <img id="fortune-img" src="" alt="Fortune">
        </div>

        <a href="https://www.instagram.com/yuxuantsuki/" class="follow-link">
            <img id="follow-png" src="Follow My IG.png" alt="Follow Me">
        </a>
        
        <div class="footer">Designed by @yuxuantsuki</div>
    </div>

    <script>
        // === 配置区域 ===
        // 确保这里的分类名字首字母大写，和你文件名一模一样
        const categories = ['Career', 'Health', 'Love', 'Lucky', 'Secret', 'Wealth'];
        const totalImagesPerCat = 50; 
        
        // 动画设置
        const animationDuration = 2000; // 总共闪动 2 秒
        const shuffleSpeed = 80;        // 每 0.08 秒换一张图 (非常快)

        // 生成随机图片路径的工具函数
        function getRandomSrc() {
            const randomCat = categories[Math.floor(Math.random() * categories.length)];
            const randomNum = Math.floor(Math.random() * totalImagesPerCat) + 1;
            return randomCat + '_' + randomNum + '.png';
        }

        // === 核心逻辑 ===
        function startLottery() {
            const landing = document.getElementById('landing-layer');
            const main = document.getElementById('main-content');
            const img = document.getElementById('fortune-img');

            // 1. 界面切换
            landing.style.opacity = '0'; // 封面淡出
            
            setTimeout(() => {
                landing.style.display = 'none'; // 彻底移除封面
                main.style.display = 'flex';    // 显示主内容
                
                // 强制重绘，确保淡入动画生效
                requestAnimationFrame(() => {
                    main.style.opacity = '1';
                });
            }, 500);

            // 2. 预加载一张图防止空白
            img.src = getRandomSrc();

            // 3. 开始疯狂闪动
            const timer = setInterval(() => {
                img.src = getRandomSrc();
            }, shuffleSpeed);

            // 4. 定时结束，定格命运
            setTimeout(() => {
                clearInterval(timer); // 停止闪动
                
                //生成最终结果
                const finalResult = getRandomSrc();
                img.src = finalResult;

                // 尝试震动一下手机 (安卓支持较好)
                if (navigator.vibrate) navigator.vibrate([50, 50, 50]);

                console.log("命运已定格: " + finalResult);

            }, animationDuration);
        }
    </script>

</body>
</html>
